<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Song Request</title>
<style>
:root{
  --bg:#0a0a0a;
  --glass:rgba(255,255,255,0.06);
  --border:rgba(255,255,255,0.12);
  --text:#eaeaea;
  --gold:#d4af37;
}

body{
  margin:0;
  font-family:Inter,sans-serif;
  background:radial-gradient(circle at top,#111,#000);
  color:var(--text);
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
  padding:20px;
}

h1{text-align:center;margin-bottom:20px;}

.container{
  width:100%;
  max-width:420px;
}

input, button{
  width:100%;
  padding:14px;
  margin-bottom:12px;
  border-radius:12px;
  border:1px solid #222;
  font-size:16px;
}

button{
  cursor:pointer;
  border:none;
}

.submit-btn{
  background:linear-gradient(135deg,#ff0066,#ff4d4d);
  color:white;
}

.payment-btn{
  background:#111;
  border:1px solid #333;
  color:white;
}

.lanes{
  margin-top:20px;
}

.lane h3{
  margin-bottom:10px;
}

.request{
  padding:10px;
  border-radius:12px;
  margin-bottom:10px;
  background:#151515;
  border:1px solid #222;
}

.approved-fast{
  animation: goldPulse 3s ease infinite;
  background:linear-gradient(270deg,var(--gold),#ffec9e,var(--gold));
  background-size:300% 300%;
  color:black;
}

@keyframes goldPulse{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

/* mobile */
@media(max-width:700px){
  input, button{font-size:14px; padding:12px;}
  .request{font-size:14px;}
}
</style>
</head>
<body>

<h1>Request a Song</h1>
<div class="container">

  <!-- Selection buttons -->
  <button id="freeBtn" class="payment-btn">Free Request</button>
  <button id="fastBtn" class="payment-btn">Fast Pass</button>

  <!-- Form -->
  <form id="requestForm" style="display:none;">
    <input name="song" placeholder="Song name" required>
    <input name="artist" placeholder="Artist name" required>
    <input name="name" placeholder="Your name (optional)">
    <input type="hidden" id="lane" name="lane">
    <input type="hidden" id="payment" name="payment">
    <button type="submit" class="submit-btn">Submit Request</button>
  </form>

  <!-- Fast pass payment selection -->
  <div id="paymentOptions" style="display:none;">
    <button class="payment-btn" id="paypalBtn">Paid via PayPal</button>
    <button class="payment-btn" id="cashBtn">Paid via Cash</button>
  </div>

  <!-- Live Lanes -->
  <div class="lanes">
    <div class="lane">
      <h3>FREE LANE</h3>
      <div id="freeLane"></div>
    </div>
    <div class="lane">
      <h3>FAST PASS</h3>
      <div id="fastLane"></div>
    </div>
  </div>

</div>

<script>
const freeBtn = document.getElementById('freeBtn');
const fastBtn = document.getElementById('fastBtn');
const requestForm = document.getElementById('requestForm');
const laneInput = document.getElementById('lane');
const paymentInput = document.getElementById('payment');
const paymentOptions = document.getElementById('paymentOptions');
const paypalBtn = document.getElementById('paypalBtn');
const cashBtn = document.getElementById('cashBtn');

let selectedLane = '';
let selectedPayment = 'free';

freeBtn.onclick = ()=>{
  selectedLane='free';
  laneInput.value='free';
  paymentInput.value='free';
  paymentOptions.style.display='none';
  requestForm.style.display='block';
}

fastBtn.onclick = ()=>{
  selectedLane='fast';
  laneInput.value='fast';
  requestForm.style.display='none';
  paymentOptions.style.display='block';
}

paypalBtn.onclick = ()=>{
  selectedPayment='paypal';
  laneInput.value='fast';
  paymentInput.value='paypal';
  requestForm.style.display='block';
  paymentOptions.style.display='none';
}

cashBtn.onclick = ()=>{
  selectedPayment='cash';
  laneInput.value='fast';
  paymentInput.value='cash';
  requestForm.style.display='block';
  paymentOptions.style.display='none';
}

/* Handle form submit */
requestForm.addEventListener('submit', e=>{
  e.preventDefault();
  const data = {
    song: e.target.song.value,
    artist: e.target.artist.value,
    name: e.target.name.value,
    lane: e.target.lane.value,
    payment: e.target.payment.value,
    status: 'pending'
  }
  const list = JSON.parse(localStorage.getItem('requests')||'[]');
  list.push(data);
  localStorage.setItem('requests', JSON.stringify(list));
  alert('Request submitted! Admin will approve it shortly.');
  requestForm.reset();
  requestForm.style.display='none';
});

/* Render live lanes */
function renderLanes(){
  const list = JSON.parse(localStorage.getItem('requests')||'[]');
  const freeLane = document.getElementById('freeLane');
  const fastLane = document.getElementById('fastLane');
  freeLane.innerHTML='';
  fastLane.innerHTML='';

  list.forEach(r=>{
    if(r.status!=='approved') return;
    const div = document.createElement('div');
    div.className='request';
    if(r.lane==='fast') div.className='request approved-fast';
    div.innerHTML=`<strong>${r.song}</strong> â€“ ${r.artist}<br><small>${r.name || ''}</small>`;
    if(r.lane==='fast') fastLane.appendChild(div);
    else freeLane.appendChild(div);
  });
}

/* Auto-refresh lanes every 3s */
setInterval(renderLanes, 3000);
renderLanes();
</script>
</body>
</html>
