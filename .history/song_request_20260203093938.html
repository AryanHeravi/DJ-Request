<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Song Request</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0b0d;
  --panel:rgba(30,30,35,0.75);
  --border:rgba(255,255,255,0.08);
  --text:#e5e5e5;
  --accent:#00ffd0;
  --gold:#d4af37;
  --highlight:#ff4d4d;
}

*{box-sizing:border-box;}
body{
  margin:0;
  font-family:'Montserrat',sans-serif;
  background:linear-gradient(180deg,#0b0b0d,#0a0a0a);
  color:var(--text);
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
  padding:20px;
}

h1{text-align:center;margin-bottom:20px;font-weight:600;letter-spacing:1px;}
.container{width:100%;max-width:480px;display:flex;flex-direction:column;gap:16px;}
button{padding:14px;border:none;border-radius:14px;font-weight:600;font-size:16px;cursor:pointer;transition:0.3s;backdrop-filter:blur(6px);color:white;}
button:hover{transform:scale(1.03);}
#paymentOptions button{padding:14px;border:none;border-radius:14px;font-weight:600;font-size:16px;cursor:pointer;transition:0.3s;color:white;backdrop-filter:blur(6px);}
#paypalBtn{background:linear-gradient(135deg,#0070ba,#00a1ff);}
#cashBtn{background:linear-gradient(135deg,#28a745,#85e085); color:black;}
.payment-btn{background:var(--panel);border:1px solid var(--border);}
.submit-btn{background:linear-gradient(135deg,var(--highlight),#ff1a66);color:white;}
form{display:none;flex-direction:column;gap:12px;background:var(--panel);padding:20px;border-radius:16px;border:1px solid var(--border);}
input{padding:12px;border-radius:12px;border:1px solid var(--border);background:#111;color:white;font-size:15px;}
#paymentOptions{display:none;flex-direction:column;gap:10px;}
.lanes{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:20px;}
.lane{background:var(--panel);padding:16px;border-radius:16px;border:1px solid var(--border);}
.lane h3{margin-bottom:12px;color:var(--accent);font-weight:600;letter-spacing:1px;}
.request{padding:10px 12px;border-radius:12px;background:rgba(20,20,25,0.85);margin-bottom:10px;font-size:14px;transition:0.3s;}
.request.approved-fast{animation: goldPulse 3s ease infinite;background:linear-gradient(270deg,var(--gold),#ffec9e,var(--gold));background-size:300% 300%;color:black;}
@keyframes goldPulse{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
@media(max-width:700px){.lanes{grid-template-columns:1fr;}button{font-size:14px;padding:12px;}}
</style>
</head>
<body>

<h1>ðŸŽµ Song Request</h1>
<div class="container">
  <!-- Selection -->
  <button id="freeBtn" class="payment-btn">Free Request</button>
  <button id="fastBtn" class="payment-btn">Fast Pass</button>

  <!-- Payment options -->
  <div id="paymentOptions">
    <button id="paypalBtn">PayPal</button>
    <button id="cashBtn">Cash</button>
  </div>

  <!-- Request Form -->
  <form id="requestForm">
    <input name="song" placeholder="Song name" required>
    <input name="artist" placeholder="Artist name" required>
    <input name="name" placeholder="Your name (optional)">
    <input type="hidden" id="lane" name="lane">
    <input type="hidden" id="payment" name="payment">
    <button type="submit" class="submit-btn">Submit Request</button>
  </form>

  <!-- Live Lanes -->
  <div class="lanes">
    <div class="lane">
      <h3>FREE LANE</h3>
      <div id="freeLane"></div>
    </div>
    <div class="lane">
      <h3>FAST PASS</h3>
      <div id="fastLane"></div>
    </div>
  </div>

  <!-- Admin button -->
  <a href="admin.html">
    <button style="background:rgba(255,255,255,0.1); color:#fff; font-size:14px; margin-top:20px; backdrop-filter:blur(6px); border:1px solid rgba(255,255,255,0.1); border-radius:12px;">
      Admin Panel
    </button>
  </a>

</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT.firebaseio.com",
  projectId: "YOUR_PROJECT",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
</script>

<script>
const freeBtn = document.getElementById('freeBtn');
const fastBtn = document.getElementById('fastBtn');
const requestForm = document.getElementById('requestForm');
const laneInput = document.getElementById('lane');
const paymentInput = document.getElementById('payment');
const paymentOptions = document.getElementById('paymentOptions');
const paypalBtn = document.getElementById('paypalBtn');
const cashBtn = document.getElementById('cashBtn');

freeBtn.onclick = ()=>{
  laneInput.value='free';
  paymentInput.value='free';
  paymentOptions.style.display='none';
  requestForm.style.display='flex';
}
fastBtn.onclick = ()=>{
  requestForm.style.display='none';
  paymentOptions.style.display='flex';
}
paypalBtn.onclick = ()=>{
  laneInput.value='fast';
  paymentInput.value='paypal';
  requestForm.style.display='flex';
  paymentOptions.style.display='none';
}
cashBtn.onclick = ()=>{
  laneInput.value='fast';
  paymentInput.value='cash';
  requestForm.style.display='flex';
  paymentOptions.style.display='none';
}

/* Submit request to Firebase */
requestForm.addEventListener('submit', e=>{
  e.preventDefault();
  const songData = {
    song:e.target.song.value,
    artist:e.target.artist.value,
    name:e.target.name.value,
    lane:e.target.lane.value,
    payment:e.target.payment.value,
    status:'pending',
    timestamp:Date.now()
  };
  const newRef = db.ref('requests').push();
  newRef.set(songData).then(()=>{
    alert("Request submitted! Admin will approve it.");
    requestForm.reset();
    requestForm.style.display='none';
  });
});

/* Render live lanes (approved only) */
const freeLane = document.getElementById('freeLane');
const fastLane = document.getElementById('fastLane');

db.ref('requests').on('value', snapshot=>{
  freeLane.innerHTML='';
  fastLane.innerHTML='';
  snapshot.forEach(child=>{
    const r = child.val();
    if(r.status!=='approved') return;
    const div = document.createElement('div');
    div.className='request';
    if(r.lane==='fast') div.className='request approved-fast';
    div.innerHTML=`<strong>${r.song}</strong> â€“ ${r.artist}<br><small>${r.name||''}</small>`;
    if(r.lane==='fast') fastLane.appendChild(div);
    else freeLane.appendChild(div);
  });
});
</script>
</body>
</html>
