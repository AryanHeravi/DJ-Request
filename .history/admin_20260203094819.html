<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Admin Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0b0d;
  --panel:rgba(30,30,35,0.85);
  --border:rgba(255,255,255,0.08);
  --text:#e5e5e5;
  --accent:#00ffd0;
  --gold:#d4af37;
  --highlight:#ff4d4d;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:'Montserrat',sans-serif;
  background:linear-gradient(180deg,#0b0b0d,#0a0a0a);
  color:var(--text);
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:20px;
  min-height:100vh;
}

h1{text-align:center;margin-bottom:20px;font-weight:600;letter-spacing:1px;}

.container{
  width:100%;
  max-width:600px;
  display:flex;
  flex-direction:column;
  gap:20px;
}

/* Login Panel */
#loginPanel{
  display:flex;
  flex-direction:column;
  gap:12px;
  background:var(--panel);
  padding:20px;
  border-radius:16px;
  border:1px solid var(--border);
}
#loginPanel input{
  padding:12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#111;
  color:white;
  font-size:15px;
}
#loginPanel button{
  background:linear-gradient(135deg,var(--highlight),#ff1a66);
  color:white;
  border:none;
  padding:14px;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
}

/* Requests Panel */
.requestsPanel{
  display:none;
  flex-direction:column;
  gap:16px;
}
.laneSection{
  background:var(--panel);
  padding:16px;
  border-radius:16px;
  border:1px solid var(--border);
}
.laneSection h3{
  margin-bottom:12px;
  color:var(--accent);
  font-weight:600;
  letter-spacing:1px;
}
.request{
  padding:10px 12px;
  border-radius:12px;
  background:rgba(20,20,25,0.85);
  margin-bottom:10px;
  font-size:14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  transition:0.3s;
}
.request.approved-fast{
  animation: goldPulse 3s ease infinite;
  background:linear-gradient(270deg,var(--gold),#ffec9e,var(--gold));
  background-size:300% 300%;
  color:black;
}
.request button{
  margin-left:6px;
  padding:6px 10px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
  font-size:12px;
  transition:0.2s;
}
.approveBtn{background:#00ffd0;color:black;}
.approveBtn:hover{transform:scale(1.05);}
.removeBtn{background:#ff4d4d;color:white;}
.removeBtn:hover{transform:scale(1.05);}
@keyframes goldPulse{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

@media(max-width:700px){
  .laneSection{padding:12px;}
  .request button{font-size:11px;padding:5px 8px;}
}
</style>
</head>
<body>

<h1>ðŸŽµ Admin Panel</h1>
<div class="container">

  <!-- Login Panel -->
  <div id="loginPanel">
    <input type="password" id="adminPassword" placeholder="Enter Admin Password">
    <button id="loginBtn">Login</button>
  </div>

  <!-- Requests Panels -->
  <div id="requestsPanel" class="requestsPanel">

    <div class="laneSection">
      <h3>Free Requests</h3>
      <div id="freeRequests"></div>
    </div>

    <div class="laneSection">
      <h3>Fast Pass Requests</h3>
      <div id="fastRequests"></div>
    </div>

  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyCRzE9DheGAxan7h2NLB14Va3hI4Pc5EKM",
  authDomain: "aryauxsongrequest.firebaseapp.com",
  databaseURL: "https://aryauxsongrequest-default-rtdb.firebaseio.com",
  projectId: "aryauxsongrequest",
  storageBucket: "aryauxsongrequest.firebasestorage.app",
  messagingSenderId: "376455919089",
  appId: "1:376455919089:web:4962df21f4145b61c30050",
  measurementId: "G-F8MTQQE489"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
</script>

<script>
const adminPassword = "1234";
const loginBtn = document.getElementById('loginBtn');
const passwordInput = document.getElementById('adminPassword');
const loginPanel = document.getElementById('loginPanel');
const requestsPanel = document.getElementById('requestsPanel');

loginBtn.onclick = ()=>{
  if(passwordInput.value === adminPassword){
    loginPanel.style.display='none';
    requestsPanel.style.display='flex';
  }else{
    alert("Incorrect Password");
  }
};

/* Render requests from Firebase */
function renderRequests(){
  db.ref('requests').once('value', snapshot=>{
    const list = snapshot.val() || {};
    const freeDiv = document.getElementById('freeRequests');
    const fastDiv = document.getElementById('fastRequests');
    freeDiv.innerHTML='';
    fastDiv.innerHTML='';

    Object.keys(list).forEach(key=>{
      const r = list[key];
      if(r.status==='approved') return;

      const div = document.createElement('div');
      div.className='request';
      if(r.lane==='fast') div.classList.add('approved-fast');
      div.innerHTML=`<span><strong>${r.song}</strong> â€“ ${r.artist}<br><small>${r.name||''}</small></span>`;

      // Approve button
      const approveBtn = document.createElement('button');
      approveBtn.className='approveBtn';
      approveBtn.textContent='Approve';
      approveBtn.onclick = ()=>{
        db.ref('requests/'+key+'/status').set('approved');
      };

      // Remove button
      const removeBtn = document.createElement('button');
      removeBtn.className='removeBtn';
      removeBtn.textContent='Remove';
      removeBtn.onclick = ()=>{
        db.ref('requests/'+key).remove();
      };

      div.appendChild(approveBtn);
      div.appendChild(removeBtn);

      if(r.lane==='fast') fastDiv.appendChild(div);
      else freeDiv.appendChild(div);
    });
  });
}

/* Auto-refresh every 2 seconds */
setInterval(renderRequests,2000);
</script>

</body>
</html>
